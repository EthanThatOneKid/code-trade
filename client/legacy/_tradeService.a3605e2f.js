import{A as e}from"./client.5ca37de4.js";const r=e({tradePartnerFriendCode:null,isTrading:!1}),t=window.location.host||"localhost:3000",a=new WebSocket(`ws://${t}`);console.log({socket:a}),a.addEventListener("open",e=>{console.log("SOCKET CONNECTED")}),a.addEventListener("message",({data:e})=>{const{type:t,details:{tradePartnerFriendCode:a}}=JSON.parse(e);switch(t){case"trade_partner_found":r.set({tradePartnerFriendCode:`Trade partner found!\r\n${a}`,isTrading:!1});break;default:console.log(`No message type ${t} accounted for.`)}});export default{subscribe:r.subscribe,requestTradePartner:e=>{if(a.readyState<=1){const t=JSON.stringify({type:"request_trade_partner",details:{clientFriendCode:e}});r.set({tradePartnerFriendCode:"Waiting for trade partner...",isTrading:!0}),a.send(t)}}};
