import{w as e,_ as t,a as r,i as n,s as a,b as s,S as o,c as i,e as c,t as u,q as d,d as f,f as l,g as p,h,j as v,k as T,l as g,m,n as y,r as b,o as C,p as P,u as E,v as F,x as N,y as S,z as w,A as R}from"./client.9e056c3b.js";const O=e({tradePartnerFriendCode:null,isTrading:!1}),_=()=>{const e=window.location.host||"localhost:3000",t=new WebSocket(`wss://${e}`);console.log({socket:t}),t.addEventListener("open",e=>{console.log("SOCKET CONNECTED")}),t.addEventListener("message",({data:e})=>{const{type:t,details:{tradePartnerFriendCode:r}}=JSON.parse(e);switch(t){case"trade_partner_found":O.set({tradePartnerFriendCode:`Trade partner found!\r\n${r}`,isTrading:!1});break;default:console.log(`No message type ${t} accounted for.`)}});return{subscribe:O.subscribe,requestTradePartner:e=>{if(t.readyState<=1){const r=JSON.stringify({type:"request_trade_partner",details:{clientFriendCode:e}});O.set({tradePartnerFriendCode:"Waiting for trade partner...",isTrading:!0}),t.send(r)}}}};function k(e){return function(){var t,r=w(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=w(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return R(this,t)}}function q(e){var t,r,n,a,s,o,S,w,R,O,_,k;return{c:function(){t=i(),r=c("h1"),n=u("Code Trade"),a=i(),s=c("p"),o=u(e[1]),S=i(),w=c("form"),R=c("input"),O=i(),_=c("input"),this.h()},l:function(i){d('[data-svelte="svelte-ccncm0"]',document.head).forEach(f),t=l(i),r=p(i,"H1",{});var c=h(r);n=v(c,"Code Trade"),c.forEach(f),a=l(i),s=p(i,"P",{});var u=h(s);o=v(u,e[1]),u.forEach(f),S=l(i),w=p(i,"FORM",{});var T=h(w);R=p(T,"INPUT",{}),O=l(T),_=p(T,"INPUT",{type:!0,value:!0}),T.forEach(f),this.h()},h:function(){document.title="Code Trade",T(_,"type","submit"),_.value="Trade!"},m:function(i,c,u){g(i,t,c),g(i,r,c),m(r,n),g(i,a,c),g(i,s,c),m(s,o),g(i,S,c),g(i,w,c),m(w,R),y(R,e[0]),m(w,O),m(w,_),u&&b(k),k=[C(R,"input",e[5]),C(w,"submit",P(e[2]))]},p:function(e,t){var r=E(t,1)[0];2&r&&F(o,e[1]),1&r&&R.value!==e[0]&&y(R,e[0])},i:N,o:N,d:function(e){e&&f(t),e&&f(r),e&&f(a),e&&f(s),e&&f(S),e&&f(w),b(k)}}}function x(e,t,r){var n,a="",s="",o=!1;return S(function(){console.log("App mounted");var e=_();n=e.requestTradePartner,e.subscribe(function(e){o=e.isTrading,r(1,s=e.tradePartnerFriendCode||"")})}),[a,s,function(e){o||n(a)},o,n,function(){a=this.value,r(0,a)}]}export default(function(e){t(c,o);var i=k(c);function c(e){var t;return r(this,c),t=i.call(this),n(s(t),e,x,q,a,{}),t}return c}());
